<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –û–±—ä–µ–º–æ–≤ –¢–æ—Ä–≥–æ–≤—ã—Ö –ü–∞—Ä</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(
          135deg,
          #1e3a8a 0%,
          #1e40af 50%,
          #3b82f6 100%
        );
        color: white;
        min-height: 100vh;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }
      .header {
        text-align: center;
        margin-bottom: 40px;
      }
      .status {
        background: rgba(0, 0, 0, 0.3);
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
      }
      .loading {
        text-align: center;
        padding: 40px;
      }
      .spinner {
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 4px solid white;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üìä –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –û–±—ä–µ–º–æ–≤ –¢–æ—Ä–≥–æ–≤—ã—Ö –ü–∞—Ä</h1>
        <p>–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä Bybit</p>
      </div>

      <div class="status">
        <h2>–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h2>
        <div id="status-content">
          <div class="loading">
            <div class="spinner"></div>
            <p>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã...</p>
          </div>
        </div>
      </div>

      <div
        id="info"
        style="
          background: rgba(0, 0, 0, 0.3);
          padding: 20px;
          border-radius: 10px;
        "
      >
        <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ</h3>
        <ul>
          <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä —Å –±–∏—Ä–∂–∏ Bybit</li>
          <li>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–∞–¥–µ–Ω–∏—é —Ü–µ–Ω—ã –∑–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–µ—Ä–∏–æ–¥</li>
          <li>–ê–Ω–∞–ª–∏–∑ –æ–±—ä–µ–º–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</li>
          <li>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –æ–±—ä–µ–º–æ–≤</li>
          <li>–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</li>
        </ul>

        <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ñ–∞–π–ª .env):</h4>
        <ul>
          <li>
            <strong>PRICE_CHECK_INTERVAL_MINUTES</strong> - –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏
            —Ü–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5 –º–∏–Ω—É—Ç)
          </li>
          <li>
            <strong>PRICE_HISTORY_DAYS</strong> - –ø–µ—Ä–∏–æ–¥ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ü–µ–Ω (–ø–æ
            —É–º–æ–ª—á–∞–Ω–∏—é: 30 –¥–Ω–µ–π)
          </li>
          <li>
            <strong>PRICE_DROP_PERCENTAGE</strong> - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ —Ü–µ–Ω—ã –≤
            % (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10%)
          </li>
          <li>
            <strong>VOLUME_MULTIPLIER</strong> - –º–Ω–æ–∂–∏—Ç–µ–ª—å –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤ –ø–æ –æ–±—ä–µ–º—É
            (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 2.0)
          </li>
          <li>
            <strong>MIN_VOLUME_USDT</strong> - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–ø–æ
            —É–º–æ–ª—á–∞–Ω–∏—é: 1000 USDT)
          </li>
        </ul>
      </div>
    </div>

    <script>
      // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
      async function checkStatus() {
        try {
          const response = await fetch('/api/stats');
          const data = await response.json();

          document.getElementById('status-content').innerHTML = `
                    <p>‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç</p>
                    <p>–¢–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä –≤ –Ω–∞–±–ª—é–¥–µ–Ω–∏–∏: <strong>${
                      data.pairs_count || 0
                    }</strong></p>
                    <p>–í—Å–µ–≥–æ —Å–≤–µ—á–µ–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: <strong>${
                      data.total_candles || 0
                    }</strong></p>
                    <p>–ê–ª–µ—Ä—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–æ: <strong>${
                      data.alerts_count || 0
                    }</strong></p>
                    <p>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ${
                      data.last_update
                        ? new Date(data.last_update).toLocaleString('ru-RU')
                        : '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö'
                    }</p>
                `;
        } catch (error) {
          document.getElementById('status-content').innerHTML = `
                    <p>‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ</p>
                    <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω</p>
                `;
        }
      }

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
      checkStatus();
      setInterval(checkStatus, 5000);
    </script>
  </body>
</html>
